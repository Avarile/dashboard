"use strict";(self.webpackChunkdashboard=self.webpackChunkdashboard||[]).push([[450],{7541:function(n,e,t){var r=t(5671),a=t(3144),i=t(4569),c=t.n(i),s=t(7497),o=t(5e3),u=t(7369),d=t(6797),f=function(){function n(){(0,r.Z)(this,n),this.axiosInstance=void 0,this.axiosInstance=c().create({timeout:1e4,baseURL:"",headers:{"Content-Type":"application/json;charset=utf-8","X-Requested-Width":"XMLHttpRequest"}}),this.interceptRequest(),this.interceptResponse()}return(0,a.Z)(n,[{key:"setIsloading",value:function(n){d.h.dispatch((0,o.ab)(n))}},{key:"setError",value:function(n){d.h.dispatch((0,o.sT)(n))}},{key:"interceptRequest",value:function(){this.axiosInstance.interceptors.request.use((function(n){return n.headers.token=s.Z.getCachedDate("token")||"",n.url.includes("/upload")&&(n.headers["Content-Type"]="multipart/form-data"),n}))}},{key:"interceptResponse",value:function(){this.axiosInstance.interceptors.response.use((function(n){if(null!==n&&void 0!==n&&n.data){var e=n.data.code;return"200"===(void 0===e?"200":e)||"ok"===n.statusText.toLocalLowerCase()?Promise.resolve(n):Promise.reject(n)}return Promise.reject("no data")}))}},{key:"get",value:function(n){var e=this,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise((function(r,a){e.setIsloading(!0),e.axiosInstance.get(n,{params:t}).then((function(n){r(n.data)})).catch((function(n){e.setError(n),(0,u.Z)({type:"warning",message:"Unable to acquire data, please check internet connection",messageTarget:""}),a(n)})).finally(e.setIsloading(!1))}))}},{key:"post",value:function(n){var e=this,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments.length>3?arguments[3]:void 0;return new Promise((function(i,c){e.setIsloading(!0),"object"===typeof t&&"FormData"===t.constructor.name&&(r["Content-Type"]="multipart/form-data"),e.axiosInstance.post(n,t,r).then((function(n){i(n.data),(0,u.Z)({type:"success",messageTarget:"".concat(a," is successfully created")})})).catch((function(n){e.setError(n),(0,u.Z)({type:"warning",messageTarget:"".concat(a," creation failed, please try again later!")}),c(n)})).finally(e.setIsloading(!1))}))}},{key:"patch",value:function(n,e,t){var r=this;return new Promise((function(a,i){r.setIsloading(!0),r.axiosInstance.patch(n,e).then((function(n){a(n.data),(0,u.Z)({type:"success",messageTarget:"$notification successfully updated"})})).catch((function(n){r.setError(n),(0,u.Z)({type:"warning",messageTarget:"".concat(t," update failed, please try again later")}),i(n)})).finally(r.setIsloading(!1))}))}},{key:"put",value:function(n,e,t){var r=this;return new Promise((function(a,i){r.setIsloading(!0),r.axiosInstance.put(n,e).then((function(n){a(n.data),(0,u.Z)({type:"success",messageTarget:"".concat(t," is succefully updated")})})).catch((function(n){(0,u.Z)({type:"warning",messageTarget:"".concat(t," update failed, please try again later")}),i(n)})).finally(r.setIsloading(!1))}))}}]),n}();e.Z=new f},3245:function(n,e,t){t.d(e,{B$:function(){return k},GQ:function(){return m},IU:function(){return h},Kt:function(){return I},Pc:function(){return y},XW:function(){return Z},c9:function(){return v},dt:function(){return b},gZ:function(){return g},uj:function(){return P},vm:function(){return w}});var r=t(1413),a=t(5861),i=t(7757),c=t.n(i),s=t(7541),o=t(1966),u=t(531),d=t(4245),f=t(6797),l=t(7369),p=(f.h.dispatch,(0,o.Z)("dev")),g=function(){var n=(0,a.Z)(c().mark((function n(e){return c().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,s.Z.post("".concat(p.dbUri,"/orders"),e,{},"order");case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),h=function(n,e,t,r){t(!0);var i=function(){var r=(0,a.Z)(c().mark((function r(){return c().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,s.Z.get("".concat(p.dbUri,"/orders?").concat(d.stringify((0,u.yE)(n)))).then((function(n){if(!(n.length>0))return null;e(n)})).finally((function(){t(!1)}));case 2:case"end":return r.stop()}}),r)})));return function(){return r.apply(this,arguments)}}();i()},v=function(){var n=(0,a.Z)(c().mark((function n(e){return c().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,s.Z.get("".concat(p.dbUri,"/orders?").concat(d.stringify((0,u.yE)(e))));case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),y=function(){var n=(0,a.Z)(c().mark((function n(e,t){return c().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:s.Z.put("".concat(p.dbUri,"/orders/").concat(e),t,"Payment");case 1:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}(),m=function(){var n=(0,a.Z)(c().mark((function n(e,t){return c().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:s.Z.put("".concat(p.dbUri,"/orders/").concat(e),t,"Fabrication Status");case 1:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}(),Z=function(){var n=(0,a.Z)(c().mark((function n(e,t){return c().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:s.Z.put("".concat(p.dbUri,"/orders/").concat(e),t,"Logistic Status");case 1:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}(),w=function(){var n=(0,a.Z)(c().mark((function n(e,t){return c().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:s.Z.put("".concat(p.dbUri,"/orders/").concat(e),t,"LogisticInfo");case 1:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}(),k=function(n,e,t,i,o,f){t((0,r.Z)((0,r.Z)({},e),{},{userInfo:!0}));var l=function(){var l=(0,a.Z)(c().mark((function a(){return c().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,s.Z.get("".concat(p.dbUri,"/clients?").concat(d.stringify((0,u.yE)(n)))).then((function(n){if(n.length>0){o((0,r.Z)((0,r.Z)({},f),{},{userCreateOrEditSwitch:!0}));var e=n[0],t=e.name,a=e.id,c=e.email,s=e.mobile,u=e.vip,d=e.address,l=e.postcode;i.setFieldsValue({client:{name:t,email:c,mobile:s,vip:u,address:d,postcode:l,id:a}})}else i.setFieldsValue({client:{name:null,email:null,mobile:null,vip:null,address:null,postcode:null,id:null}})})).finally((function(){t((0,r.Z)((0,r.Z)({},e),{},{userInfo:!1}))}));case 2:case"end":return a.stop()}}),a)})));return function(){return l.apply(this,arguments)}}();(0,u.Ds)(l,3e3)()},I=function(){var n=(0,a.Z)(c().mark((function n(e,t){var a;return c().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if("update"!==t){n.next=4;break}return a=(0,r.Z)((0,r.Z)({},e),{},{updatedAt:(0,u.uO)()}),n.next=4,s.Z.put("".concat(p.dbUri,"/clients/").concat(a.id,"}"),e,"User Info".concat(e.name));case 4:if("create"!==t){n.next=10;break}return a=(0,r.Z)((0,r.Z)({},e),{},{createdAt:(0,u.uO)()}),n.next=8,s.Z.post("".concat(p.dbUri,"/clients"),e,{},"user: ".concat(e.name));case 8:n.next=11;break;case 10:return n.abrupt("return",(0,l.Z)({type:"error",message:"User Component Error"}));case 11:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}(),P=function(){var n=(0,a.Z)(c().mark((function n(e,t,a,i,o){return c().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t((0,r.Z)((0,r.Z)({},a),{},{productSearch:!0})),n.next=3,s.Z.get("".concat(p.dbUri,"/products?sku=").concat(e)).then((function(n){var e=i.getFieldValue("products");if(!(n.length>0))return null;var t=n[0],r=t.name,a={id:t.id,name:r,size:t.size,price:t.price,pcPrice:t.powdercoatingPrice,installPrice:t.installationPrice,currentInStock:t.currentInStock},c=e.map((function(n,e){return e===o?(n.name=a.name,n.id=a.id,n.size=a.size,n.price=a.price,n.pcPrice=a.pcPrice,n.installPrice=a.installPrice,n.currentInStock=a.currentInStock,n):n}));i.setFieldsValue({products:c})})).finally((function(){setTimeout((function(){t((0,r.Z)((0,r.Z)({},a),{},{productSearch:!1}))}),1e3)}));case 3:case"end":return n.stop()}}),n)})));return function(e,t,r,a,i){return n.apply(this,arguments)}}(),b=function(){var n=(0,a.Z)(c().mark((function n(e){var t;return c().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=(0,r.Z)((0,r.Z)({},e),{},{currentInStock:e.currentInStock-1}),n.next=3,s.Z.put("".concat(p.dbUri,"/products/").concat(e.id),t,"".concat(e.name));case 3:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},1966:function(n,e){var t={dbUri:"http://localhost:3001"};e.Z=function(n){if("dev"===n)return t;if("dep"===n)return t;throw new Error("Wrong Env selection")}},7369:function(n,e,t){t(6072);var r=t(3695);e.Z=function(n){var e;return e=n.message?n.message:n.messageTarget,r.ZP[n.type](e)}},531:function(n,e,t){t.d(e,{s9:function(){return m},Ds:function(){return Z},ey:function(){return I},BU:function(){return v},nF:function(){return k},uo:function(){return y},Xz:function(){return h},yE:function(){return l},U9:function(){return g},uO:function(){return w}});var r,a,i,c,s=t(7762),o=t(1413),u=t(7892),d=t.n(u);!function(n){n.pending="pending",n.machineProcessing="machineProcessing",n.machineProcessFinished="machineProcessFinished",n.powderCoating="powderCoating",n.powderCoatingFinished="powderCoatingFinished",n.waitingForInstallation="waitingForInstallation",n.installing="installing",n.ready="ready"}(r||(r={})),function(n){n.waitingForCarrier="waitingForCarrier",n.pickupAlready="pickupAlready",n.delivering="delivering",n.delivered="delivered",n.cannotDeliver="cannotDeliver",n.returningToVender="returningToVender",n.returnedItemArrived="returnedItemArrived",n.itemDamagedInTransport="itemDamagedInTransport"}(a||(a={})),function(n){n.AustralianPost="Australian Post",n.BigPost="Big Post",n.FastWay="FastWay"}(i||(i={})),function(n){n.pending="pending",n.partiallyPayed="partiallyPayed",n.fullyPayed="fullyPayed"}(c||(c={}));var f=t(3245),l=function(n){var e=(0,o.Z)({},n);return Object.keys(e).forEach((function(n){var t=e[n];p(t)&&delete e[n]})),e},p=function(n){return void 0===n||null===n||""===n},g=function(n){return n>=10?"processing":n>=5?"success":n>=3?"warning":n<3?"error":"default"},h=function(n){switch(n){case"pending":return"error";case"partiallyPayed":case"machineProcessing":case"machineProcessFinished":case"powderCoating":case"powderCoatingFinished":case"installing":return"default";case"fullyPayed":case"ready":return"success"}},v=function(n){switch(n){case"pending":return"error";case"machineProcessing":case"machineProcessFinished":case"powderCoating":case"powderCoatingFinished":case"waitingForInstallation":case"installing":return"processing";case"ready":return"success"}},y=function(n){switch(n){case"waitingForCarrier":case"itemDamagedInTransport":return"error";case"pickupAlready":case"delivering":return"processing";case"delivered":case"returnedItemArrived":return"success";case"cannotDeliver":case"returningToVender":return"warning"}},m=function(n,e){var t,r=0,a=(0,s.Z)(e);try{for(a.s();!(t=a.n()).done;){t.value.type===n?r++:r=r}}catch(i){a.e(i)}finally{a.f()}return r},Z=function(n){var e,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;return function(){for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];e&&clearTimeout(e),e=setTimeout((function(){n.apply(a)}),t)}},w=function(){return d()().format("YYYY-MM-DD")},k=function(n){var e,t=[],r=(0,s.Z)(n);try{for(r.s();!(e=r.n()).done;){var a=e.value;a.currentInStock>=1?t=[]:t.push({sku:a.sku})}}catch(i){r.e(i)}finally{r.f()}return t},I=function(n){(0,f.dt)(n)}}}]);
//# sourceMappingURL=450.3e1b7e5d.chunk.js.map